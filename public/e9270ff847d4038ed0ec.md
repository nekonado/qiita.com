---
title: packer.nvimã®Undefined global `use`ã¸ã®å¯¾å¿œ
tags:
  - Vim
  - neovim
  - VSCode
private: false
updated_at: '2023-04-24T10:03:23+09:00'
id: e9270ff847d4038ed0ec
organization_url_name: SasukeFL
slide: false
ignorePublish: false
---
# ã¯ã˜ã‚ã«
2ãƒ¶æœˆã»ã©å‰ã€ä»¥ä¸‹ã®è¨˜äº‹ã‚’èª­ã‚“ã§Vimã«èˆˆå‘³ã‚’æŒã¡ã¾ã—ãŸã€‚

https://note.com/navitime_tech/n/nf6cae399ae75

ç§ã®ä¸­ã§ã®ãã‚Œã¾ã§ã®Vimã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ã€ã€Œå¤§å­¦ã®è¬›ç¾©ã§ä½¿ã£ãŸã“ã¨ãŒã‚ã‚‹ï¼ˆã—ã‹ã—å®šç€ã—ãªã‹ã£ãŸï¼‰Emacsã®ãƒ©ã‚¤ãƒãƒ«ã€ã§ã‚ã‚Šã€Œæ–°äººç ”ä¿®ã§é­é‡ã—ãŸé–‰ã˜ã‚Œãªããªã£ãŸéå»ãŒã‚ã‚‹ã‚¨ãƒ‡ã‚£ã‚¿ã€ã§ã—ãŸãŒã€ä¸Šè¨˜ã®è¨˜äº‹ã‚’èª­ã‚“ã§ã€ãã‚Œã¾ã§ä½¿ã£ã¦ã„ãŸVSCodeã‹ã‚‰ã™ãã«ä¹—ã‚Šæ›ãˆã‚‹ã“ã¨ã¯é›£ã—ãã†ã ã‘ã©ã€Œæ…£ã‚Œã‚‹ã¨æ—©ãã†ã ãªã€ã¨æ„Ÿã˜ãŸã“ã¨ã‚’è¦šãˆã¦ã„ã¾ã™ã€‚

ãã®å¾Œã€@yutkatã•ã‚“ã®æ›¸ã‹ã‚ŒãŸä»¥ä¸‹ã®è¨˜äº‹ã‚’èª­ã¿ã€VSCodeã§Vimï¼ˆNeovimï¼‰ã‚’ä½¿ãˆã‚‹[VSCode Neovim](https://marketplace.visualstudio.com/items?itemName=asvetliakov.vscode-neovim)ã‚’çŸ¥ã‚ŠãŠã‚ˆã1ãƒ¶æœˆä½¿ç”¨ã—ãŸå¾Œã«ã€æœ€è¿‘ã§ã¯å¾ã€…ã«[Neovim](https://neovim.io/)è‡ªä½“ã¸ã®ã‚¨ãƒ‡ã‚£ã‚¿ã®ç§»è¡Œã‚’é€²ã‚ã¦ã„ã¾ã™ã€‚

https://zenn.dev/yutakatay/articles/vscode-neovim

# packer.nvimã«ã¤ã„ã¦
Neovimã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒãƒãƒ¼ã‚¸ãƒ£ã«ã¤ã„ã¦ã€Vim scriptã‚ˆã‚ŠLuaã§è¨­å®šã‚’æ›¸ã„ã¦ã¿ãŸã‹ã£ãŸã“ã¨ã‚‚ã‚ã‚Šã€ç§ã¯[packer.nvim](https://github.com/wbthomason/packer.nvim)ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚packerã¯ã‚³ãƒãƒ³ãƒ‰ã§ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ç®¡ç†ã‚’å§‹ã‚ã€Neovimæ¨™æº–ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ç®¡ç†æ©Ÿèƒ½ã«å¯¾ã—ã¦æ§˜ã€…ãªè¿½åŠ æ©Ÿèƒ½ã‚’æä¾›ã—ã¦ãã‚Œã¾ã™ã€‚ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚è€ƒã«ã•ã›ã¦ã„ãŸã ãã€å°å…¥ã«è‡³ã‚Šã¾ã—ãŸã€‚

https://qiita.com/delphinus/items/8160d884d415d7425fcc

# Undefined global \`use\`ã«ã¤ã„ã¦

packerã§ã¯`packer.startup`ã§å—ã‘å–ã£ãŸé–¢æ•°å†…ã§useé–¢æ•°ã‚’ä½¿ã†ã“ã¨ã§ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚ãã®éš›ã«ç§ã®ç’°å¢ƒã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªWarningãŒé »ç™ºã—ã¦ã„ã¾ã—ãŸã€‚

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2304176/ac85ae75-ae91-111e-c321-3cc237cdf502.png)

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ãƒ­ãƒ¼ãƒ‰è‡ªä½“ã«å•é¡Œã¯ãªã‹ã£ãŸã®ã§ã™ãŒã€ã‚ã¾ã‚Šæ°—æŒã¡ã®ã„ã„ã‚‚ã®ã§ã¯ãªã„ã§ã™ã‚ˆã­ã€‚

# å¯¾å‡¦

èª¿ã¹ã¦ã¿ãŸã¨ã“ã‚ã€ä»¥ä¸‹ã®Issueã‚’è¦‹ã¤ã‘ã¾ã—ãŸã€‚

https://github.com/wbthomason/packer.nvim/issues/243

ä¸Šè¨˜ã«ã‚ˆã‚Œã°ã€

- ã“ã®äº‹è±¡`packer.startup`ã«æ¸¡ã•ã‚ŒãŸé–¢æ•°å†…ã§ä½¿ç”¨ã•ã‚ŒãŸuseé–¢æ•°ã‚’lspãŒèªè­˜ã§ããšç™ºç”Ÿã—ã¦ãŠã‚Šã€ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã«ã‚ˆã£ã¦è§£æ¶ˆã§ãã‚‹ã€‚
  1. lspã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«useã‚’è¿½åŠ ã™ã‚‹
  1. `packer.startup`ã«æ¸¡ã™é–¢æ•°ãŒuseã‚’å—ã‘å–ã‚‹ã‚ˆã†ã«ã™ã‚‹ï¼ˆæ¨å¥¨ğŸŒŸï¼‰


ã¨ã®ã“ã¨ã§ã™ã€‚

å®Ÿéš›ã«ã€ä¸‹è¨˜ã®ã‚ˆã†ã«`packer.startup`ã«æ¸¡ã™é–¢æ•°ã«useã‚’æ¸¡ã™ã“ã¨ã§ã€ã“ã®Warningã¯è§£æ¶ˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚

``` lua
packer.startup(function(use)
  use 'XXX/YYY'
end)
```

# ãŠã‚ã‚Šã«

2021/3/4ã«Closeã•ã‚ŒãŸä¸Šè¨˜ã®Issueä»¥é™ã«ã€packerã®ãƒªãƒã‚¸ãƒˆãƒªã®READMEã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªè¨˜è¿°ãŒè¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚

> Note that if you get linter complaints about use being an undefined global, these errors are spurious - packer injects use into the scope of the function passed to startup. If these errors bother you, the easiest fix is to simply specify use as an argument to the function you pass to startup.

ã‚ˆã£ã¦ã€ç¾åœ¨ã¯å…¬å¼ã«è§£æ±ºæ¸ˆã¿ã®å•é¡Œã¨ãªã‚Šã¾ã™ãŒã€å‚è€ƒã«ã™ã‚‹æƒ…å ±ã®æ›´æ–°æ™‚æœŸã‚„lspã¨ã®çµ„ã¿åˆã‚ã›ã«ã‚ˆã£ã¦ã¯ã€åŒæ§˜ã®å•é¡ŒãŒç™ºç”Ÿã—å¾—ã‚‹ã¨æ€ã„è¨˜è¼‰ã—ã¾ã—ãŸã€‚ã¾ã ã¾ã åˆå¿ƒè€…ã§ã™ãŒã€å°‘ã—ãšã¤Vimã‚¹ã‚­ãƒ«ã‚‚å‘ä¸Šã•ã›ã¦ã„ããŸã„ã§ã™ğŸ’ª
